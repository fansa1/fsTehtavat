(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),l=t(2),c=function(e){var n=e.value,t=e.onChange;return r.a.createElement(r.a.Fragment,null,"filter shown with ",r.a.createElement("input",{value:n,onChange:t}))},i=function(e){var n=e.onSubmit,t=e.valueName,a=e.onChangeName,o=e.valueNumber,u=e.onChangeNumber;return r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a}),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:o,onChange:u}))),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add"))))},m=function(e){var n=e.Objektilista,t=e.filtteri,a=e.ButtonClick,o=[],u=n.map(function(e){return e.name}).filter(function(e){return e.toLowerCase().includes(t.toLowerCase())}),l=n.filter(function(e){return u.includes(e.name)});return o=""===t?n.map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return a(e.id)}}," delete "))}):l.map(function(e){return r.a.createElement("li",{key:e.id},e.name," ",e.number," ",r.a.createElement("button",{onClick:function(){return a(e.id)}}," delete "))}),r.a.createElement("div",null,r.a.createElement("ul",null,o))},f=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{style:{color:"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},n)},s=function(e){var n=e.message;return null===n?null:r.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10}},n)},d=t(3),b=t.n(d),g=function(){return b.a.get("/api/persons").then(function(e){return e.data})},h=function(e){return b.a.post("/api/persons",e).then(function(e){return e.data})},v=function(e){var n="/api/persons/".concat(e);return b.a.delete(n).then(function(e){return console.log(e.data)})},p=function(e,n){var t="/api/persons/".concat(e);return b.a.put(t,n).then(function(e){return e.data})},E=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),d=Object(l.a)(u,2),b=d[0],E=d[1],w=Object(a.useState)(""),C=Object(l.a)(w,2),O=C[0],j=C[1],k=Object(a.useState)(""),y=Object(l.a)(k,2),S=y[0],N=y[1],T=Object(a.useState)(null),B=Object(l.a)(T,2),L=B[0],I=B[1],J=Object(a.useState)(null),z=Object(l.a)(J,2),A=z[0],D=z[1];Object(a.useEffect)(function(){g().then(function(e){return o(e)})},[]);return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(f,{message:L}),r.a.createElement(s,{message:A}),r.a.createElement(c,{value:S,onChange:function(e){console.log(e.target.value),N(e.target.value)}}),r.a.createElement("h3",null,"add a new"),r.a.createElement(i,{onSubmit:function(e){e.preventDefault(),console.log("button clicked",e.target);var n={name:b,number:O};if(t.map(function(e){return e.name.toLowerCase()}).includes(n.name.toLowerCase())){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var a=t.filter(function(e){return e.name.includes(b)})[0].id,r={name:b,number:O};p(a,r).then(function(e){return console.log(e)}).catch(function(e){console.log("fail"),I("Error. Information of ".concat(r.name," has already been removed from the server")),setTimeout(function(){I(null)},5e3)}),g().then(function(e){return o(e)}),E(""),j(""),I("Changed the phonenumber for ".concat(r.name)),setTimeout(function(){I(null)},5e3)}}else h(n).then(function(e){o(t.concat(e)),I("Added ".concat(b)),E(""),j(""),setTimeout(function(){I(null)},5e3)}).catch(function(e){D("".concat(JSON.stringify(e.response.data))),setTimeout(function(){D(null)},5e3)})},valueName:b,onChangeName:function(e){console.log(e.target.value),E(e.target.value)},valueNumber:O,onChangeNumber:function(e){console.log(e.target.value),j(e.target.value)}}),r.a.createElement("h3",null,"Numbers"),r.a.createElement(m,{Objektilista:t,filtteri:S,paivitaObjektilista:o,ButtonClick:function(e){var n=t.filter(function(n){return n.id===e})[0].name;if(window.confirm("Are you sure you wish to delete ".concat(n,"?"))){v(e).then(function(e){return console.log(e)}).catch(function(a){I("Error. Information of ".concat(n," has already been removed from the server")),setTimeout(function(){I(null)},5e3),o(t.filter(function(n){return n.id!==e}))});var a=t.filter(function(n){return n.id===e})[0].name;o(t.filter(function(n){return n.id!==e})),I("Deleted ".concat(a)),setTimeout(function(){I(null)},5e3)}else o(t)}}))};u.a.render(r.a.createElement(E,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.8e5994ad.chunk.js.map